<template>
    <div class="headers">
        <router-link to="/" class="site-logo">
            <svg width='215' height='32' viewBox='0 0 215 32' fill='none' xmlns='http://www.w3.org/2000/svg'> <g clip-path='url(#clip0_264_8440)'> <path d='M184.63 9.9482H189.047L183.466 16.2628L189.509 22.9514H185.081L179.25 16.5839V22.9514H175.5V5.92307H179.25V16.0406L184.63 9.9482Z' fill='#7000FF'/> <path d='M167.097 12.7422V9.94467H163.347V22.9479H167.097V17.2047C167.097 14.9787 168.713 13.55 170.769 13.55H173.221V9.66951H171.38C169.101 9.68009 167.453 11.6133 167.097 12.7422Z' fill='#7000FF'/> <path fill-rule='evenodd' clip-rule='evenodd' d='M158.496 9.94467V18.383C158.496 19.5189 158.817 19.7976 159.576 19.7941H160.169V22.9479H158.02C157.307 22.9842 156.603 22.7825 156.017 22.3744C155.431 21.9663 154.998 21.375 154.785 20.6937C153.872 22.3235 151.963 23.2513 149.882 23.2513C145.945 23.2513 143.426 19.847 143.507 16.4322C143.507 13.0561 145.733 9.69067 150.069 9.69067C152.587 9.69067 154.006 10.7913 154.813 11.9943L154.785 9.94467H158.496ZM147.127 16.471C147.127 18.5276 148.732 19.9987 150.848 19.9987C153.05 19.9987 154.641 18.51 154.641 16.471C154.641 14.4319 153.05 12.9891 150.848 12.9891C148.718 12.9891 147.127 14.4143 147.127 16.471Z' fill='#7000FF'/> <path d='M130.328 12.1178C131.217 10.6608 133.005 9.6942 135.376 9.6942C139.408 9.6942 141.341 12.2377 141.341 15.388V22.9408H137.591V15.9065C137.591 14.4214 136.73 13.0843 134.928 13.0843C133.125 13.0843 132.236 14.3543 132.236 15.8642V22.962H128.472V15.8748C128.472 14.3649 127.527 13.0949 125.713 13.0949C123.9 13.0949 123.103 14.4214 123.103 15.9171V22.9514H119.353V15.388C119.353 12.2377 121.406 9.6942 125.424 9.6942C127.463 9.6942 129.424 10.6608 130.328 12.1178Z' fill='#7000FF'/> <path fill-rule='evenodd' clip-rule='evenodd' d='M196.818 9.6942C192.497 9.6942 189.763 12.1036 189.763 16.4604C189.763 20.8171 192.493 23.2548 196.853 23.2548C203.112 23.2548 203.496 19.0215 203.496 19.0215H199.376C199.376 19.0215 199.058 20.3444 196.857 20.3444C194.458 20.3444 193.717 18.9016 193.717 17.4728H203.736C203.785 17.1386 203.812 16.8016 203.817 16.4639C203.817 12.1036 201.073 9.6942 196.818 9.6942ZM193.77 15.1763C193.77 14.118 194.476 12.6081 196.818 12.6081C199.161 12.6081 199.813 14.118 199.813 15.1763H193.77Z' fill='#7000FF'/> <path d='M215 9.70126V12.721L210.915 12.7316V17.3176C210.915 19.1309 211.395 19.6988 212.679 19.6988H215V22.9831H212.679C208.943 22.9831 207.179 21.4486 207.179 17.808V12.7351H205.285V10.5761L208.904 7.12249H210.929V9.70126H215Z' fill='#7000FF'/> <path d='M103.623 9.68008C101.249 9.68008 99.4607 10.6467 98.5717 12.1177C97.6721 10.6467 95.7107 9.68008 93.6682 9.68008C89.6642 9.68008 87.597 12.2377 87.597 15.3879V22.9514H91.3505V15.9171C91.3505 14.4072 92.1442 13.0949 93.961 13.0949C95.7778 13.0949 96.7302 14.3649 96.7302 15.8748V22.962H100.48V15.8642C100.48 14.3543 101.369 13.0843 103.172 13.0843C104.975 13.0843 105.835 14.4072 105.835 15.9065V22.9408H109.585V15.3879C109.585 12.2377 107.652 9.68008 103.623 9.68008Z' fill='#7000FF'/> <path d='M68.3003 9.93408V13.0985L60.8109 19.787H68.7483V22.9514H55.8263V19.787L63.3297 13.0985H56.1191V9.93408H68.3003Z' fill='#7000FF'/> <path d='M78.0827 19.7729C79.8183 19.7729 80.9825 18.8169 80.9825 16.7532V9.94467H84.736V16.8943C84.736 21.4345 80.9401 23.1983 78.0933 23.1983C75.2464 23.1983 71.4541 21.4239 71.4541 16.8943V9.94467H75.2182V16.7532C75.2182 18.8169 76.347 19.7729 78.0827 19.7729Z' fill='#7000FF'/> <path d='M46.7212 19.7729C48.4427 19.7729 49.6104 18.8169 49.6104 16.7532V9.94467H53.3604V16.8943C53.3604 21.4345 49.5575 23.1983 46.7353 23.1983C43.8708 23.1983 40.0926 21.4239 40.0926 16.8943V9.94467H43.8461V16.7532C43.8461 18.8169 44.9997 19.7729 46.7212 19.7729Z' fill='#7000FF'/> <path d='M31.9896 16.0053C31.9889 19.1704 31.0498 22.2643 29.2912 24.8955C27.5326 27.5268 25.0334 29.5772 22.1098 30.7875C19.1861 31.9978 15.9693 32.3135 12.8663 31.6949C9.76321 31.0762 6.91327 29.5508 4.6769 27.3117C2.44053 25.0726 0.918195 22.2204 0.302449 19.1158C-0.313297 16.0111 0.00520068 12.7936 1.21766 9.87001C2.43012 6.94646 4.48208 4.44826 7.114 2.6914C9.74592 0.934529 12.8396 -0.00208978 16.0037 3.50108e-06C18.1047 -0.000924639 20.1854 0.412484 22.1266 1.21658C24.0679 2.02068 25.8316 3.1997 27.317 4.68621C28.8023 6.17271 29.9802 7.93754 30.7831 9.87977C31.5861 11.822 31.9985 13.9035 31.9966 16.0053H31.9896ZM17.8304 5.5597C17.2309 5.50326 16.6173 5.47856 15.9966 5.47856C15.3759 5.47856 14.7658 5.50326 14.1663 5.5597V14.0933H17.8304V5.5597ZM26.2942 10.5338C24.9588 10.0949 23.5942 9.7507 22.2104 9.5037V16.672C22.2104 21.8296 20.0239 24.5424 15.9931 24.5424C11.9622 24.5424 9.78282 21.8296 9.78282 16.672V9.5037C8.39801 9.75113 7.03224 10.0953 5.69554 10.5338V16.7108C5.67022 18.0799 5.9179 19.4402 6.42412 20.7124C6.93033 21.9845 7.68493 23.143 8.64382 24.1201C9.60271 25.0973 10.7467 25.8734 12.0088 26.4033C13.271 26.9331 14.6261 27.206 15.9949 27.206C17.3637 27.206 18.7187 26.9331 19.9809 26.4033C21.2431 25.8734 22.387 25.0973 23.3459 24.1201C24.3048 23.143 25.0594 21.9845 25.5656 20.7124C26.0718 19.4402 26.3195 18.0799 26.2942 16.7108V10.5338Z' fill='#7000FF'/> </g> <defs> <clipPath id='clip0_264_8440'> <rect width='215' height='32' fill='white'/> </clipPath> </defs> </svg>
        </router-link>
        <el-button class="header-category__btn" @click="dialog = !dialog">
            <svg width="18" height="12" viewBox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 12H0V10H18V12ZM18 7H0V5H18V7ZM18 2H9V0H18V2Z" fill="#707373"/>
            </svg>
        </el-button>
        
        
        <div class="header-search">
            <el-input v-model="search" @input="handleSearch($event)" placeholder="Please input" @keyup.enter="searchProduct"/>
            <el-button class="header-search__btn" @click="searchProduct">
                <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 20L15.514 15.506L20 20ZM18 9.5C18 11.7543 17.1045 13.9163 15.5104 15.5104C13.9163 17.1045 11.7543 18 9.5 18C7.24566 18 5.08365 17.1045 3.48959 15.5104C1.89553 13.9163 1 11.7543 1 9.5C1 7.24566 1.89553 5.08365 3.48959 3.48959C5.08365 1.89553 7.24566 1 9.5 1C11.7543 1 13.9163 1.89553 15.5104 3.48959C17.1045 5.08365 18 7.24566 18 9.5V9.5Z" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </el-button>
        </div>
        
        
        <div class="header-lang">
            <el-dropdown trigger="click">
                <span class="el-dropdown-link">
                    UZ<el-icon class="el-icon--right"><arrow-down /></el-icon>
                </span>
                <template #dropdown>
                    <el-dropdown-menu>
                        <el-dropdown-item>ENG</el-dropdown-item>
                        <el-dropdown-item>
                            RU
                        </el-dropdown-item>
                    </el-dropdown-menu>
                </template>
            </el-dropdown>
            
        </div>
        
        <el-button class="login-btn" @click="goLogin">
            <img :src="require('@/assets/user.jpeg')" alt="user" width="30" height="30">
            <span>Kirish</span>
        </el-button>
        
        <el-badge :value="basketLength" class="header-badge" type="primary">
            <el-button @click="(() => $router.push({ name: 'BasketProducts' }))"> 
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                width="25" height="25" viewBox="0 0 1280.000000 1082.000000"
                preserveAspectRatio="xMidYMid meet">
                <g transform="translate(0.000000,1082.000000) scale(0.100000,-0.100000)"
                fill="#000000" stroke="none">
                <path d="M11700 10810 c-337 -33 -629 -132 -869 -291 -102 -69 -149 -107 -260
                -214 -126 -121 -215 -229 -324 -394 -51 -76 -96 -145 -102 -154 -8 -12 -76
                -19 -350 -36 -187 -12 -475 -30 -640 -41 -165 -11 -438 -29 -607 -40 -170 -11
                -445 -29 -613 -40 -168 -11 -442 -29 -610 -40 -168 -11 -442 -29 -610 -40
                -168 -11 -441 -29 -607 -40 -167 -11 -1196 -78 -2288 -150 -2225 -146 -2327
                -153 -2740 -180 -320 -22 -390 -34 -503 -92 -101 -50 -177 -106 -262 -192
                -184 -185 -298 -426 -311 -656 -6 -91 -1 -118 95 -610 56 -283 124 -630 152
                -770 56 -285 212 -1079 378 -1925 61 -308 121 -617 135 -687 38 -196 113 -341
                248 -484 142 -149 319 -246 518 -284 35 -7 1337 -10 3797 -10 l3743 0 -5 -22
                c-3 -13 -41 -239 -85 -502 -44 -264 -82 -482 -85 -484 -2 -3 -42 -11 -87 -19
                -438 -75 -811 -405 -945 -835 l-28 -91 -470 7 c-258 3 -1166 9 -2017 12
                l-1547 7 -26 86 c-95 306 -327 575 -621 720 -173 85 -336 122 -534 123 -202 0
                -358 -36 -536 -122 -579 -281 -837 -972 -584 -1566 150 -352 449 -608 820
                -704 287 -74 627 -30 885 115 156 87 324 240 417 381 65 97 133 242 163 348
                14 50 27 92 29 94 3 2 757 -1 1678 -7 920 -6 1822 -11 2005 -11 l332 0 16 -58
                c98 -355 323 -628 649 -788 589 -287 1290 -57 1605 527 49 91 93 214 117 329
                25 117 25 353 0 470 -66 314 -236 575 -496 761 -79 57 -221 131 -275 145 -14
                3 -25 8 -25 10 0 3 22 136 50 297 27 160 124 737 215 1282 91 545 210 1256
                265 1580 55 325 155 925 224 1335 487 2899 444 2660 478 2715 112 182 315 405
                455 498 158 105 340 172 548 202 188 27 530 17 779 -25 33 -5 61 -8 63 -6 3 3
                81 509 78 513 -2 4 -140 24 -260 39 -146 18 -499 26 -615 14z m-1732 -2007
                c-37 -225 -161 -959 -274 -1633 -112 -674 -227 -1355 -254 -1515 -27 -159
                -101 -603 -165 -985 -64 -382 -118 -696 -119 -697 -1 -1 -1689 -5 -3751 -9
                -3547 -7 -3753 -6 -3810 10 -33 10 -82 30 -108 44 -61 33 -142 120 -173 186
                -17 36 -55 212 -129 586 -236 1210 -408 2085 -537 2733 -135 678 -136 687 -70
                820 52 104 141 201 223 240 58 28 53 27 584 62 222 14 3886 255 4503 295 166
                11 439 29 607 40 168 11 442 29 610 40 168 11 442 29 610 40 168 11 442 29
                610 40 168 11 441 29 608 40 166 11 444 29 617 40 173 11 329 22 345 23 17 2
                55 5 86 5 l56 2 -69 -407z m-7214 -6948 c246 -52 441 -252 492 -505 67 -336
                -153 -670 -492 -746 -97 -21 -241 -15 -334 15 -184 59 -337 208 -408 399 -18
                50 -26 93 -30 173 -6 131 13 227 66 332 48 98 179 229 274 275 138 68 289 87
                432 57z m6456 -26 c111 -36 180 -79 265 -164 127 -127 185 -265 185 -447 0
                -117 -14 -176 -66 -285 -35 -73 -60 -108 -117 -166 -125 -126 -278 -189 -461
                -188 -178 1 -314 58 -441 186 -117 117 -178 246 -191 405 -27 319 209 622 528
                679 79 15 223 5 298 -20z"/>
                <path d="M8140 7940 c-289 -21 -544 -39 -1600 -110 -410 -28 -810 -55 -890
                -60 -80 -5 -480 -32 -890 -60 -410 -28 -875 -59 -1035 -70 -159 -11 -495 -33
                -745 -50 -584 -38 -618 -42 -681 -77 -127 -69 -186 -214 -145 -355 29 -102
                135 -195 241 -212 22 -4 173 2 335 14 162 11 630 42 1040 70 410 28 810 55
                890 60 80 5 480 32 890 60 410 28 810 55 890 60 80 5 413 28 740 50 1395 94
                1338 90 1394 111 200 74 259 326 114 484 -97 106 -149 114 -548 85z"/>
                <path d="M4747 5839 c-1733 -6 -2358 -11 -2385 -19 -96 -30 -186 -123 -212
                -220 -36 -131 35 -280 165 -348 l50 -27 2680 4 c1474 2 2869 7 3100 10 410 6
                421 7 466 29 131 64 199 207 164 343 -28 110 -105 193 -207 224 -59 17 119 17
                -3821 4z"/>
            </g>
        </svg>
        <span>Savatcha</span>
    </el-button>
</el-badge>
</div>

<el-drawer
v-model="dialog"
direction="ttb"
custom-class="demo-drawer"
size="100%"
:with-header=false
:show-close=false
>
<div class="demo-drawer__content">
    <TheHeaderCategoryDrawer />
</div>
</el-drawer>

</template>

<script setup>
import TheHeaderCategoryDrawer from './User/TheHeaderCategoryDrawer.vue'
import router from '@/router'
import store from '@/store'
import {
    ArrowDown,
} from '@element-plus/icons-vue'
import { ref } from '@vue/reactivity'
import { computed } from '@vue/runtime-core'
const dialog = ref(false)
const search = ref("")


const basketLength = computed(() => {
    return store.state.basket?.purchasing?.length
})
const handleSearch = (e) => {
    console.log(e)
}
const searchProduct = () => {
    store.dispatch("product/searchProduct",search.value)
    if(router.currentRoute.value !== "searches"){
        router.push({ name: "SearchedProducts", query: { name: search.value }})
    }
}
const goLogin = () => {
    router.push({ name: "Login" })
}
</script>

<style>
.headers{
    display: flex;
    align-items: center;
    padding: 20px 0;
}
.header .el-overlay{
    top: 80px !important;
}
.site-logo{
    margin-right: 80px;
}
.header-search{
    display: flex;
    background: #FAFBFB;
    border: 2px solid rgb(112, 0, 255);
    border-radius: 12px;
    width: 400px;
    margin-right: 40px;
}
.header-category__btn{
    margin-right: 40px;
}
.header-search .el-input__wrapper{
    box-shadow: none !important;
    border-radius: 12px;
    background-color: inherit !important;
}

.demo-drawer__content{
    display: flex;
    align-items: center;
}
.header-search__btn{
    border: 2px solid rgb(112, 0, 255) !important;
    border-bottom-right-radius: 8px !important;
    border-top-right-radius: 8px !important;
    background-color: rgb(112, 0, 255) !important;
    padding: 16px 26px;
}
.login-btn{
    margin-left: auto !important;
    border: none !important;
    background-color: inherit !important;
    font-size: 18px !important;
    font-weight: bold !important;
}
.login-btn img{
    margin-right: 8px;
}
.header-badge .el-button{
    border: none;
}
.header-badge span{
    margin-left: 6px;
}
@media screen and (max-width:830px) {
    .site-logo{
        display: none;
    }
    .header-lang{
        display: none;
    }
}
@media screen and (max-width:570px) {
    .header-search__btn{
        padding: 5px !important;
        border-bottom-right-radius: 9px !important;
        border-top-right-radius: 9px !important;
    }
    .header-search{
        margin-right: 0;
    }
    .header-category__btn{
        margin-right: 12px;
    }
    .login-btn span{
        display: none;
    }
}
</style>